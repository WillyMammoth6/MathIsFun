<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Math Zoo</title>
    <style>
        /* --- RESET & BASE STYLES --- */
        * {
            box-sizing: border-box;
            user-select: none; /* Prevents text selection on tapping */
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #121212; /* Dark Theme Background */
            color: #ffffff;
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif; /* Friendly font */
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #app {
            width: 100%;
            max-width: 600px; /* Tablet constraint */
            height: 100%;
            position: relative;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* --- UTILITY CLASSES --- */
        .hidden {
            display: none !important;
        }

        .screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        /* --- TYPOGRAPHY --- */
        h1 {
            font-size: 3rem;
            color: #FFD700; /* Gold */
            text-shadow: 2px 2px 0px #d35400;
            margin-bottom: 20px;
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        p {
            font-size: 1.2rem;
            color: #bdc3c7;
        }

        /* --- BUTTONS --- */
        button {
            border: none;
            outline: none;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            box-shadow: 0 4px 0 rgba(0,0,0,0.4);
            transition: transform 0.1s, filter 0.1s;
        }

        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .btn-large {
            font-size: 1.5rem;
            padding: 15px 40px;
            border-radius: 50px;
            margin: 10px;
            width: 80%;
            max-width: 300px;
        }

        .btn-easy { background-color: #2ecc71; color: white; }
        .btn-hard { background-color: #e74c3c; color: white; }
        .btn-restart { background-color: #3498db; color: white; }

        /* --- GAME SCREEN SPECIFICS --- */
        .hud {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            color: #f1c40f;
            font-weight: bold;
            background: rgba(255,255,255,0.1);
            padding: 5px 15px;
            border-radius: 15px;
        }

        .question-box {
            background-color: #2c3e50;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border: 4px solid #34495e;
        }

        .question-text {
            font-size: 4rem;
            font-weight: bold;
            color: #ecf0f1;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
        }

        .answer-btn {
            background-color: #8e44ad;
            color: white;
            font-size: 2.5rem;
            padding: 20px;
            border-radius: 15px;
        }

        .answer-btn:active {
            background-color: #9b59b6;
        }

        /* --- FEEDBACK OVERLAY (ANIMAL PICTURE) --- */
        #feedback-screen {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
            background: rgba(0,0,0,0.9);
        }

        .animal-img {
            max-width: 90%;
            max-height: 60vh;
            border-radius: 20px;
            border: 5px solid #fff;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
            object-fit: cover;
        }

        .praise-text {
            font-size: 3rem;
            color: #2ecc71;
            margin-top: 20px;
            font-weight: bold;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

    </style>
</head>
<body>

<div id="app">
    
    <!-- SCREEN: TITLE -->
    <div id="title-screen" class="screen">
        <h1>Math Zoo ü¶Å</h1>
        <p>Pick a difficulty to start!</p>
        <br>
        <button class="btn-large btn-easy" onclick="game.startGame('easy')">Easy üôÇ</button>
        <button class="btn-large btn-hard" onclick="game.startGame('hard')">Hard üòé</button>
    </div>

    <!-- SCREEN: GAMEPLAY -->
    <div id="game-screen" class="screen hidden">
        <div class="hud">Score: <span id="score-display">0</span></div>
        
        <div class="question-box">
            <div class="question-text" id="question-text">1 + 1 = ?</div>
        </div>

        <div class="answers-grid" id="answers-container">
            <!-- Buttons injected by JS -->
        </div>
        <p style="margin-top:20px; opacity: 0.5;">Question <span id="q-count">1</span> / 10</p>
    </div>

    <!-- SCREEN: FEEDBACK (CORRECT) -->
    <div id="feedback-screen" class="screen hidden">
        <img id="animal-display" class="animal-img" src="" alt="Cute Animal">
        <div class="praise-text">Correct!</div>
    </div>

    <!-- SCREEN: GAME OVER -->
    <div id="end-screen" class="screen hidden">
        <h1>Great Job!</h1>
        <h2>Your Score</h2>
        <h1 style="font-size: 5rem; color: #2ecc71;" id="final-score">0</h1>
        <p>You answered 10 questions!</p>
        <br>
        <button class="btn-large btn-restart" onclick="game.resetToTitle()">Play Again üîÑ</button>
    </div>

</div>

<script>
/**
 * Game Logic Module
 * Handles state, math generation, and DOM updates.
 */
const game = {
    // Configuration
    maxQuestions: 10,
    
    // State
    score: 0,
    questionNumber: 0,
    difficulty: 'easy',
    currentQuestion: null,
    isProcessing: false, // Prevents double tapping

    // curated list of high-quality cute animal images
    animalImages: [
        "https://images.unsplash.com/photo-1591160690555-5debfba289f0?w=600&q=80", // Golden Retriever Puppy
        "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=600&q=80", // Kitten
        "https://images.unsplash.com/photo-1585110396000-c9285745b25c?w=600&q=80", // Baby Sloth
        "https://images.unsplash.com/photo-1505628346881-b72e278045a4?w=600&q=80", // Fox
        "https://images.unsplash.com/photo-1555685812-4b943f1cb0eb?w=600&q=80", // Baby Bunny
        "https://images.unsplash.com/photo-1537151608828-ea2b11777ee8?w=600&q=80", // Puppy with eyes closed
        "https://images.unsplash.com/photo-1535241556845-3a31a1913f28?w=600&q=80", // Meerkat
        "https://images.unsplash.com/photo-1518796745738-41048802f99a?w=600&q=80", // Baby Rabbit
        "https://images.unsplash.com/photo-1513360371669-4adf3dd7dff8?w=600&q=80", // Kitten in basket
        "https://images.unsplash.com/photo-1501686637-b7aa9c48a882?w=600&q=80"  // Panda
    ],

    // --- Navigation Functions ---

    startGame: function(mode) {
        this.difficulty = mode;
        this.score = 0;
        this.questionNumber = 0;
        this.isProcessing = false;
        
        // Update UI
        document.getElementById('score-display').innerText = this.score;
        this.showScreen('game-screen');
        
        // Generate first question
        this.nextQuestion();
    },

    resetToTitle: function() {
        this.showScreen('title-screen');
    },

    showScreen: function(id) {
        // Hide all screens
        document.querySelectorAll('.screen').forEach(el => el.classList.add('hidden'));
        // Show target
        document.getElementById(id).classList.remove('hidden');
    },

    // --- Math Logic ---

    getRandomInt: function(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    },

    generateQuestion: function() {
        let n1, n2, operator, answer;
        const isAddition = Math.random() > 0.5; // 50/50 chance of add or subtract

        if (this.difficulty === 'easy') {
            // Easy: N1 (1-9), N2 (1-2)
            n1 = this.getRandomInt(1, 9);
            n2 = this.getRandomInt(1, 2);
        } else {
            // Hard: N1 (1-9), N2 (1-9)
            n1 = this.getRandomInt(1, 9);
            n2 = this.getRandomInt(1, 9);
        }

        if (isAddition) {
            operator = '+';
            answer = n1 + n2;
        } else {
            operator = '-';
            // Logic to prevent negative answers for 6 year olds
            // Ensure n1 is the larger number
            if (n2 > n1) {
                let temp = n1;
                n1 = n2;
                n2 = temp;
            }
            answer = n1 - n2;
        }

        return {
            text: `${n1} ${operator} ${n2} = ?`,
            correctAnswer: answer
        };
    },

    generateAnswers: function(correct) {
        let answers = new Set();
        answers.add(correct);

        // Generate distractors
        while (answers.size < 4) {
            // Generate a wrong answer close to the correct one
            let offset = this.getRandomInt(-3, 3);
            let wrong = correct + offset;
            
            // Ensure no negative answers and no duplicate logic (Set handles duplicates)
            if (wrong >= 0 && wrong !== correct) {
                answers.add(wrong);
            } else if (wrong < 0) {
                // If negative, just add a random positive number
                answers.add(this.getRandomInt(0, 10));
            }
        }

        // Convert to array and shuffle
        return Array.from(answers).sort(() => Math.random() - 0.5);
    },

    // --- Gameplay Flow ---

    nextQuestion: function() {
        if (this.questionNumber >= this.maxQuestions) {
            this.endGame();
            return;
        }

        this.questionNumber++;
        document.getElementById('q-count').innerText = this.questionNumber;
        
        // Logic
        this.currentQuestion = this.generateQuestion();
        const choices = this.generateAnswers(this.currentQuestion.correctAnswer);

        // Render
        document.getElementById('question-text').innerText = this.currentQuestion.text;
        
        const container = document.getElementById('answers-container');
        container.innerHTML = ''; // Clear old buttons

        choices.forEach(choice => {
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.innerText = choice;
            btn.onclick = () => this.checkAnswer(choice);
            container.appendChild(btn);
        });

        this.isProcessing = false;
    },

    checkAnswer: function(selectedVal) {
        if (this.isProcessing) return;
        this.isProcessing = true;

        if (selectedVal === this.currentQuestion.correctAnswer) {
            // Correct!
            this.score++;
            document.getElementById('score-display').innerText = this.score;
            this.showFeedback();
        } else {
            // Wrong
            // Flash red visual cue on the specific button pressed could go here, 
            // but for simplicity we just move to next question or show feedback.
            // Requirement says: "If user selects correct answer... picture displayed"
            // It doesn't specify what happens on wrong.
            // To keep flow moving for a kid, let's just move to next question immediately on wrong answer 
            // without the animal picture, so they learn that pictures = winning.
            this.nextQuestion();
        }
    },

    showFeedback: function() {
        // Pick random animal
        const randomImg = this.animalImages[Math.floor(Math.random() * this.animalImages.length)];
        document.getElementById('animal-display').src = randomImg;
        
        // Show overlay
        this.showScreen('feedback-screen');

        // Wait 3 seconds then go to next
        setTimeout(() => {
            this.showScreen('game-screen');
            this.nextQuestion();
        }, 3000);
    },

    endGame: function() {
        document.getElementById('final-score').innerText = this.score;
        this.showScreen('end-screen');
    }
};

// Start logic when screen loads? No, wait for user click.
</script>

</body>
</html>
